# chapter 8 정리 :  객체 참조, 가변성, 재활용
***
### Concept 
* 객체지향 상용구의 첫 장
    클래스 생성에 대해 집중적으로 알아본다
    참조가 작동하는 방식, 가변성이 의미하는 것, 객체의 수명주기
    , 컬렉션이나 ABC를 직접 만드는 방법, 다중 상속을 처리하는 방법
    , 연산자 오버로딩을 구현하는 방법 등을 설명한다

---    
    
### Contents  

**1. 변수는 상자가 아니다**
      
**2 기본 복사는 얕은 복사**  

**3 참조로서의 함수 매개변수**  
 
**4 약한 참조**  
     
**5 파이썬의 특이한 불변형 처리법**
       
**6 요약**    
    
    
---

### Usage        
  
**1. 변수는 상자가 아니다**    

아래 코드를 보면 참조 변수에 대한 이해가 될 것이다


```python
a = [1,2,3,4]
b = a
a.append(5)
print(a)
print(b)
```

    [1, 2, 3, 4, 5]
    [1, 2, 3, 4, 5]
    

---  
  
**2. 기본 복사는 얕은 복사**  
  
리스트나 대부분의 내장 가변 컬렉션을 복사하는 가장 손쉬운 방법은     
그 자료형 자체의 내장 생성자를 사용하는 것이다   
아래 코드를 보자


```python
l1 = [3,[55,44], (7,8,9)]
l2 = list(l1)
print(l2)
print(l1 == l2)
print(l1 is l2)
```

    [3, [55, 44], (7, 8, 9)]
    True
    False
    

리스트 및 가변형 시퀀스의 경우 l2 = li1[:] 코드는 사본을 생성한다

그러나 생성자나 [:]을 사용하면 **얕은 사본**을 생성한다   
즉, 최상위 컨테이너는 복제하지만 사본은 원래 컨테이너에 
들어 있던 동일 객체에 대한 참조로 채워진다

---  
  
**3. 참조로서의 함수 매개변수**  
  
파이썬은 공유로 호출하는 매개변수 전달 방식만 지원한다
이 방식은 루비, 스몰토크, 자바 등 대부분의 객체지향 언어에서 
사용하는 방식과 동일하다
 
--- 
  
**4. 약한 참조**  
  
불필요하게 객체를 유지시키지 않으면서 겍체를 참조할 수 있으면 도움이 되는 경우가 종종 있다  ex) 캐시  

약한 참조는 참조 카운트를 증가시키지 않고 객체를 참조한다  

참조의 대상인 객체를 "참조 대상"이라고 한다
따라서 약한 참조는 참조 대상이 가비지 컬렉트되는 것을 방지하지 않는다고 말할 수 있다  

---  
   
   
**5. 파이썬의 특이한 불변형 처리법**  
  
튜플 t에 대해 t[:]가 사본을 생성하지 않고 그 객체에 대한 참조를 반환한다는 것은 꽤나 놀라웠다
tuple(t)와 같이 생성자를 이용해도 참조가 반환된다


```python
t1 = (1,2,3)
t2 = tuple(t1)
print(t1 is t2)

t3 = t1[:]
print(t1 is t3)
```

    True
    True
    

str, bytes, frozenset 객체에서도 이와 동일한 동작을 볼 수 있다
frozenset이 시퀀스가 아니므로 frozenset 형인 fs에 대해 fs[:]는 작동하지 않지만
fs.copy()는 동일하게 작동한다 즉, fs.copy()는 사본이 아니라 동일 객체에 대한
참조를 반환한다


```python
t1 = (1,2,3)
t3 = (1,2,3)
print(t1 is t3)
s1 = 'ABC'
s2 = 'ABC'
print(s1 is s2)
```

    False
    True
    

---    

  
**6. 요약**  
  
모든 파이썬 객체는 정체성, 자료형, 값을 갖고 있다  
코드가 시행되는 동안 객체는 값만 바뀔뿐이다  
  
변수 두개가 동일한 값을 가지 불변 객체(a==b가 참이다)를 가리키고 있다면  
변수가 각각의 사본을 가리키고 있는지 동일 객체에 대한 별명인지는 중요하지 않다  
불변 객체는 변하지 않기 때문이다
  
      
변수가 참조를 담고 있다는 것은 파이썬 프로그래밍에 다음과 같은 영향을 미친다  
+ 단순 할당문은 사본을 생성하지 않는다
+ +=이나 *=같은 복합 할당 연산자는 왼쪽 변수가 불변 객체에 바인딩되어 있을 때는 객체를 새로 생성하  
    가변 객체에 바인딩되어 있을 때는 기존 객체를 변경한다
